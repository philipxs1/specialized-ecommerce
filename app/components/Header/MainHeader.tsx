import { useEffect, useState } from "react";
import { useCart } from "~/context/ShoppingCartProvider";
import { useCartStore } from "~/context/useCartStore";
import type { Navigation } from "~/entities/Navigation";

import Icon from "~/ui/Icon/Icon";
import CartBadge from "./CartBadge";

interface HeaderProps {
  navigation: Navigation;
}

const MainHeader = ({ navigation }: HeaderProps) => {
  const totalQuantity = useCartStore((state) => state.totalQuantity());

  return (
    <header
      id="header-wrapper"
      className={`top-0 z-999 flex w-full max-w-full flex-col bg-white shadow-xs transition-transform duration-300`}
    >
      <div className="w-full">
        <div className="relative z-2 flex min-h-[50px] w-full items-center p-4 lg:px-6">
          <div className="flex h-full grow flex-wrap items-center lg:flex-nowrap">
            {/* left logo */}
            <a href="/" className="flex cursor-pointer items-center">
              <svg
                className="max-h-4 w-auto md:max-h-5"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 1540 160"
                width="192.5"
                height="20"
              >
                <title>Navigation Logo</title>
                <path
                  fill="#252525"
                  d="m1098.04.03s-.02-.03-.02-.03l-45.65.07-91.57,159.89s.02.03.02.03l47.4-.03h-.02L1098.04.03Z"
                ></path>
                <path
                  fill="#252525"
                  d="m903.35,146.4c-6.32,0-12.94-1.4-7.56-10.26C901.19,127.24,971.97.07,971.97.07L926.22,0s-69.67,122.07-78.1,137.07c-8.41,14.95-3.22,22.91,11.79,22.91l80.91-.04,7.03-13.49s-.02-.05-.02-.05h-44.48Z"
                ></path>
                <path
                  fill="#252525"
                  d="m784.27,10.4c-4.51,5.14-131.71,149.19-132.03,149.57h43.35l55.99-64.97h36.92s.02.04,0,.04l-10.11,64.86v.02h45.07L843.99,0l-39.26.05c-6.35-.03-15.9,5.23-20.46,10.35Zm5.74,72.93l-26.62-.03,33.31-43.13-6.69,43.16Z"
                ></path>
                <polygon
                  fill="#252525"
                  points="675.28 0 583.75 160 631.21 159.95 721.02 .02 675.28 0"
                ></polygon>
                <path
                  fill="#252525"
                  d="m567.36,22.11c3.52-5.6,5.2-10.72,20.19-10.75l60.12.05L654.5.05s0-.03,0-.03l-97.85.05c-13.86,0-26.75,2.47-31.6,11.82-4.92,9.33-65.46,115.9-72.03,127.54-6.53,11.7-3.29,20.57,14.02,20.57h97.22l5.7-13.54-13.98-.02h-47.19c-9.81.02-9.98-4.2-6.53-9.85,3.51-5.63,61.63-108.84,65.11-114.48Z"
                ></path>
                <path
                  fill="#252525"
                  d="m389.75,84.79h56.55l8-11.57s0-.04,0-.04l-58.34.04s22.83-41.24,28.2-50.16c5.4-8.85,10.71-12.14,25.7-12.14h54.38l-.04-.02L511.53.03s0-.02,0-.02h-96.33c-16.18,0-27.44,3.93-34.76,16.59-7.4,12.58-60.54,106.5-69.19,122.37-8.62,15.89.07,20.99,13.33,21.03l95.37-.05,7.45-13.51s0-.04,0-.04l-13.88-.04-47.17.07c-9.26-.02-10.37-2.83-4.74-12.64,5.54-9.8,28.15-49.01,28.15-49.01Z"
                ></path>
                <path
                  fill="#252525"
                  d="m1523.76.02l-110.64.03-90.54,159.95h117.09c15.58-.02,24.83-8.42,31.42-20.07,6.53-11.7,61.81-108.18,66.72-117.46h-.02c4.94-9.4,2.09-22.4-14.04-22.45Zm-35.94,27.29c-5.89,11.14-57.69,101.64-61.97,108.2-4.3,6.56-7.61,11.18-19.14,11.22h-16.57l-14.39-.03,75.44-133.39,29.81-.04c8.65-.03,12.64,2.79,6.81,14.04Z"
                ></path>
                <path
                  fill="#252525"
                  d="m1248.15,146.44c-9.29-.02-10.41-2.86-4.82-12.64l-.02.02c5.58-9.78,28.23-49.04,28.23-49.04l56.48-.05,8.04-11.48h-58.38s22.84-41.24,28.22-50.13c5.36-8.89,10.66-12.18,25.67-12.23l54.4.07,7.29-10.9s0-.03,0-.03l-96.28.03c-16.2,0-27.44,3.88-34.82,16.51-7.35,12.59-60.49,106.5-69.12,122.41-8.66,15.84.09,20.97,13.33,21.01l95.34-.05,7.52-13.54s0-.04,0-.04h-13.95l-47.14.09Z"
                ></path>
                <path
                  fill="#252525"
                  d="m1094.77,146.47c-7.45-.03-5.54-3.75-1.29-7.48,4.28-3.71,131.36-110.82,143.88-120.61,12.48-9.88,6.83-18.27-5.88-18.34l-106.88.04-6.09,12.66s.02.03.02.03h68.52c4.58-.02,5.93,1.88,1.03,6.06-4.99,4.21-133.73,111.28-147.13,122.46-13.38,11.27-8.53,18.7,5.27,18.7h117.22v.02l6.97-13.56s-.02-.04-.02-.04l-75.62.07Z"
                ></path>
                <path
                  fill="#252525"
                  d="m151.06,116.98c13.15-22.98,8.9-28.07-6.59-38.8-8.41-5.76-17.91-13.07-26.02-18.17-8.12-5.12-8.11-13.1-3.63-20.53,4.5-7.47,6.06-12.12,10.78-18.22,4.78-6.11,9.74-10.27,18.39-10.29l65.26.2L216.45,0l-100.67.05c-12.13-.02-23.95,1.14-30.54,12.82-6.51,11.73-9.12,15.91-15.91,28.46-6.73,12.62-7.22,14.99,5.22,23.85,12.52,8.87,23.6,16.34,31.97,22.86,8.34,6.58,6.55,12.14.02,23.84-6.55,11.68-8.2,14.01-13.38,21.95-5.19,7.96-8.46,12.62-19.95,12.62H9.29l-9.29,13.54,103.2-.07c15.01,0,24.92-3.27,33.9-18.17,8.96-14.99,3.82-7.08,13.97-24.76v-.02Z"
                ></path>
                <path
                  fill="#252525"
                  d="m328.17,72.63l.03-.02c11.98-20.62,19.97-33.67,27.14-48.14C362.52,10.01,355.16-.04,338.48,0h-97.99l-93.36,159.91s0,.05,0,.05h44.52l31.99-55.35s40.89-4.43,62.79-6.75c21.82-2.4,29.79-4.69,41.75-25.23Zm-46.05-3.78c-7.15,11.68-12.02,16.39-18.14,17.76-4.83,1.17-25.12,3.47-31.79,4.34v-.02l45.32-79.94,23.52-.05-.02-.02c5.73.04,10.71,3.77,4.94,14.52-5.79,10.74-16.69,31.76-23.83,43.41Z"
                ></path>
              </svg>
            </a>
            {/* middle nav */}
            <div className="absolute left-1/2 hidden -translate-x-1/2 lg:block">
              <nav className="flex w-min justify-center gap-12">
                {navigation.items.map(({ title, url }) => (
                  <span key={title} className="font-bold">
                    <a href={url}>{title}</a>
                  </span>
                ))}
              </nav>
            </div>
          </div>
          {/* right nav */}
          <nav className="flex items-center gap-4">
            <div>
              <Icon id="search" />
            </div>
            <a href="/cart">
              <button className="relative cursor-pointer">
                <Icon id="shopping-cart" />
                <CartBadge count={totalQuantity} />
              </button>
            </a>
            <a href="">
              <Icon id="user" />
            </a>
            <a href="">
              <Icon id="menu" />
            </a>
          </nav>
        </div>
      </div>
    </header>
  );
};

export default MainHeader;
